# Generated by CogSol 0.2.0 on 2026-02-22 07:42
from cogsol.db import migrations


class Migration(migrations.Migration):
    initial = True
    dependencies = []
    operations = [
        migrations.CreateRetrievalTool(name='AmericasSearch', fields={'description': 'Search travel destinations in the Americas.', 'parameters': [], 'name': 'AmericasSearch'}),
        migrations.CreateRetrievalTool(name='AsiaSearch', fields={'description': 'Search travel destinations in Asia.', 'parameters': [], 'name': 'AsiaSearch'}),
        migrations.CreateRetrievalTool(name='EuropeSearch', fields={'description': 'Search travel destinations in Europe.', 'parameters': [], 'name': 'EuropeSearch'}),
        migrations.CreateTool(name='SearchInformation', fields={'name': 'search_information', 'description': 'Search for travel information across different destination regions. Available topics: europe, asia, americas.', 'show_tool_message': False, 'parameters': {'topic': {'description': "Topic(s) to search. Available: europe, asia, americas. Use '|' to search multiple topics at once.", 'type': 'string', 'required': True}, 'question': {'description': 'The search query about travel destinations.', 'type': 'string', 'required': True}}, '__code__': '@tool_params(\n    topic={\n        "description": (\n            "Topic(s) to search. Available: europe, asia, americas. "\n            "Use \'|\' to search multiple topics at once."\n        ),\n        "type": "string",\n        "required": True,\n    },\n    question={\n        "description": "The search query about travel destinations.",\n        "type": "string",\n        "required": True,\n    },\n)\ndef run(self, topic="", question="", chat=None, data=None, log=None):\n    from django.apps import apps\n\n    Retrieval = apps.get_model("assistant", "Retrieval")\n\n    topics = topic.split("|")\n    params_ret = {"question": question}\n    response = ""\n\n    for t in topics:\n        normalized = t.strip().lower()\n        retrieval_name = f"search_selector_{normalized}"\n        log.append(f"Searching in topic: {normalized}")\n\n        try:\n            func = Retrieval.objects.get(name=retrieval_name)\n            result = func.run(chat, params_ret)\n            content = result.get("response", "")\n\n            last_msg = chat.messages.all().order_by("msg_num").last()\n            last_msg.delete()\n\n            response += f"# Information from {normalized}:\\n{content}\\n\\n"\n            log.append(f"Found results for {normalized}")\n        except Retrieval.DoesNotExist:\n            response += f"No information available for topic: {normalized}\\n"\n            log.append(f"No retrieval found for: {retrieval_name}")\n\n    return response'}),
        migrations.CreateAgent(name='TravelGuideAgent', fields={'system_prompt': '# Travel Guide Assistant\n\nYou are a helpful travel guide assistant that provides information about destinations around the world.', 'generation_config': 'QA', 'temperature': 0.3, 'max_responses': 10, 'max_msg_length': 2048, 'max_consecutive_tool_calls': 3, 'tools': ['search_information', 'EuropeSearch', 'AsiaSearch', 'AmericasSearch'], 'initial_message': 'Hello! I am the Travel Guide Assistant. I can help you find information about destinations in Europe, Asia, and the Americas. Ask me about attractions, local cuisine, best times to visit, or travel tips for any destination.', 'forced_termination_message': 'We are ending this conversation to preserve security and integrity.', 'no_information_message': 'I could not find information matching that query. Try asking about a specific destination or region.', 'name': 'TravelGuide'}, meta={'name': 'TravelGuideAgent', 'chat_name': 'Travel Guide Assistant'}),
    ]
